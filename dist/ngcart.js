/*! ngCart 2014-06-19 */
"use strict";function log(a){console.log(a)}angular.module("ngCart",[]).config([function(){}]).provider("$ngCart",function(){this.$get=function(){}}).run(["ngCart",function(a){a.setCart(Modernizr.localstorage&&angular.isArray(JSON.parse(localStorage.getItem("cart")))?JSON.parse(localStorage.getItem("cart")):[])}]).service("ngCart",["ngCartItem",function(){this.setCart=function(a){this.$cart=a},this.getCart=function(){return this.$cart},this.addItem=function(a,b,c,d,e){d||(d=1);var f=this.itemInCart(a);if(f!==!1)this.quantity(f,d);else{var g={id:a,name:b,price:c,quantity:d,data:e};this.$cart.push(g)}this.$saveCart(this.$cart)},this.itemInCart=function(a){var b=_.find(this.getCart(),{id:a});return void 0===b?!1:b},this.totalItems=function(){return this.getCart().length},this.totalCost=function(){var a=0;return angular.forEach(this.getCart(),function(b){a+=b.price*b.quantity}),a},this.quantity=function(a,b){var c=a.quantity+b;1>c&&(c=1),a.quantity=c,this.$saveCart()},this.removeItem=function(a){this.$cart.splice(a,1),this.$saveCart(this.$cart)},this.empty=function(){this.$cart=[],Modernizr.localstorage&&localStorage.removeItem("cart")},this.$saveCart=function(){Modernizr.localstorage&&localStorage.setItem("cart",JSON.stringify(this.getCart()))}}]).service("ngCartItem",[function(){this.$item=null,this.$quantity=1,this.getTotal=function(){return this.$quantity*this.$item.price},this.getQuantity=function(){return this.$quantity},this.getItem=function(){return this.$item},this.setItem=function(a){this.$item=a},this.setQuantity=function(a){this.$quantity=a}}]).controller("CartController",["$scope","ngCart",function(a,b){a.scopeCart=b}]).directive("addtocart",["ngCart",function(a){return{restrict:"E",controller:["$scope",function(b){b.ngCart=a}],scope:{},transclude:!0,templateUrl:"/template/addtocart.html",link:function(b,c,d){b.attrs=d,b.inCart=function(){return a.itemInCart(d.id)}}}}]).directive("cart",["ngCart",function(a){return{restrict:"E",controller:["$scope",function(b){b.ngCart=a}],scope:{},templateUrl:"/template/cart.html",link:function(){}}}]).directive("summary",["ngCart",function(a){return{restrict:"E",controller:["$scope",function(b){b.ngCart=a}],scope:{},transclude:!0,templateUrl:"/template/summary.html"}}]).value("version","0.1").value("key","test");